---
apiVersion: garage.rajsingh.info/v1alpha1
kind: GarageBucket
metadata:
  name: forgejo
spec:
  clusterRef:
    name: garage
    namespace: garage
  globalAlias: forgejo
  quotas:
    maxSize: 100Gi
    maxObjects: 5000000
  keyPermissions:
    - keyRef: forgejo-key
      read: true
      write: true
      owner: true
---
apiVersion: garage.rajsingh.info/v1alpha1
kind: GarageKey
metadata:
  name: forgejo-key
spec:
  clusterRef:
    name: garage
    namespace: garage
  name: "Forgejo Key"
  secretTemplate:
    name: garage-s3-auth
    accessKeyIdKey: AWS_ACCESS_KEY_ID
    secretAccessKeyKey: AWS_SECRET_ACCESS_KEY
  bucketPermissions:
    - bucketRef: forgejo
      read: true
      write: true
      owner: true
