---
# PLACEHOLDER - This file needs to be encrypted with SOPS after adding real values
# Run: sops --encrypt --in-place secret.sops.yaml
#
# For Ottawa (same cluster as control plane), you can use the internal service:
#   server: "https://karmada-apiserver.karmada-system.svc.cluster.local:5443"
# Or use Tailscale for consistency:
#   server: "https://karmada-apiserver.keiretsu.ts.net:5443"
#
# To generate credentials, on Ottawa run:
#   kubectl -n karmada-system get secret karmada-kubeconfig -o jsonpath='{.data.kubeconfig}' | base64 -d
#
apiVersion: v1
kind: Secret
metadata:
  name: karmada-agent-kubeconfig
type: Opaque
stringData:
  kubeconfig.yaml: |
    agent:
      kubeconfig:
        # Using internal DNS since agent is on same cluster as control plane
        server: "https://karmada-apiserver.karmada-system.svc.cluster.local:5443"
        # CA certificate from Karmada
        caCrt: |
          -----BEGIN CERTIFICATE-----
          REPLACE_WITH_KARMADA_CA_CERTIFICATE
          -----END CERTIFICATE-----
        # Client certificate for this agent
        crt: |
          -----BEGIN CERTIFICATE-----
          REPLACE_WITH_AGENT_CLIENT_CERTIFICATE
          -----END CERTIFICATE-----
        # Client key for this agent
        key: |
          -----BEGIN RSA PRIVATE KEY-----
          REPLACE_WITH_AGENT_CLIENT_KEY
          -----END RSA PRIVATE KEY-----
