---
apiVersion: pxc.percona.com/v1
kind: PerconaXtraDBCluster
metadata:
  name: fleet-mysql
spec:
  crVersion: 1.19.0
  allowUnsafeConfigurations: true
  secretsName: fleet-mysql-secrets
  pxc:
    size: 1
    image: percona/percona-xtradb-cluster:8.0.36-28.1
    configuration: |
      [mysqld]
      skip-grant-tables=0
      character-set-server=utf8mb4
      collation-server=utf8mb4_unicode_ci
      default-authentication-plugin=mysql_native_password
      pxc_strict_mode=DISABLED
      wsrep_OSU_method=RSU
    resources:
      requests:
        cpu: 100m
        memory: 512Mi
      limits:
        memory: 1Gi
    volumeSpec:
      persistentVolumeClaim:
        storageClassName: ceph-block-replicated
        resources:
          requests:
            storage: 10Gi
  haproxy:
    enabled: false
  logcollector:
    enabled: false
  pmm:
    enabled: false
