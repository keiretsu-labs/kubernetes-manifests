---
apiVersion: garage.rajsingh.info/v1alpha1
kind: GarageKey
metadata:
  name: tailscale-recorder-key
spec:
  clusterRef:
    name: garage

  name: "Tailscale Recorder Key"

  # Create secret in tailscale namespace for the recorder
  secretTemplate:
    name: s3-auth
    namespace: tailscale
    accessKeyIdKey: AWS_ACCESS_KEY_ID
    secretAccessKeyKey: AWS_SECRET_ACCESS_KEY

  bucketPermissions:
    - bucketRef: tailscale-recorder
      read: true
      write: true
