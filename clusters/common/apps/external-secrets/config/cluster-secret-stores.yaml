---
# ClusterSecretStore for Ottawa cluster
# Uses Tailscale egress service - auth handled by Tailscale impersonation
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: kubernetes-ottawa
spec:
  provider:
    kubernetes:
      remoteNamespace: external-secrets
      server:
        url: https://ottawa-k8s-operator.tailscale.svc.cluster.local
        # ISRG Root X1 - Let's Encrypt root CA (Tailscale uses LE certs)
        caBundle: |
          LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZhekNDQTFPZ0F3SUJBZ0lSQUlJUXo3
          RFNRT05aUkdQZ3UyT0NpMkF3RFFZSktvWklodmNOQVFFTEJRQXcKVHpFTE1Ba0dBMVVFQmhN
          Q1ZWTXhLVEFuQmdOVkJBb1RJRWx1ZEdWeWJtVjBJRk5sWTNWeWFYUjVJRkpsYzJWaApjbU5v
          SUVkeWIzVndNUlV3RXdZRFZRUURFd3hKVTFKSElGSnZiM1FnV0RFd0hoY05NVFV3TmpBME1U
          RXdOREE0CldoY05NelV3TmpBME1URXdOREE0V2pCUE1Rc3dDUVlEVlFRR0V3SlZVekVwTUNj
          R0ExVUVDaE1nU1c1MFpYSnUKWlhRZ1UyVmpkWEpwZEhrZ1VtVnpaV0Z5WTJnZ1IzSnZkWEF4
          RlRBVEJnTlZCQU1UREVsVFVrY2dVbTl2ZENCWQpNVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJC
          UUFEZ2dJUEFEQ0NBZ29DZ2dJQkFLM29KSFAwRkRmem01NHJWeWdjCmg3N2N0OTg0a0l4dVBP
          WlhvSGozZGNLaS92VnFidllBVHlqYjNtaUdiRVNUdHJGai9SUVNhNzgvb3drYXNaQ3UKUUZu
          Qm5rb1BTUktJaTVLV1ZXblRzTnVqR1ZPUHFYMmlYeFYreEU2cFEremlPQkJXS29Fa29CZzF3
          YTJLZnJlUgpKUS85Q2dINFVIM0dSQklVaWcrcW4wZVNQUUFwMjByMzhRMk5aK3dRRVdFQWdB
          Y25rSXVrWGJoaHVqQVpEWkhlCkU2Q2tBeHNFYjRMUFFWSHRWT05OMXhIL0d0N3pzNTZsbHdS
          Q0RESWpUTklYSCtmcFdPYllPb1lWS1F1SWQyZUkKaGxoNGdkbktZMm1zM25XYk1MRGFKRjRE
          a3A2TkROMzRUYWdER21oVW01U3VMWTBOZXZ4R0JaNUtNbkhtakUwMgppZ0c0cGdxbU1RQkpC
          Mkdja0oxYWQwd1VrS1dTMmcxMHBubE1pSjB6RUdNdjVXU0FKMUQ3SDcxTjdncmdJM1l3ClIy
          K0xJSTUrVnc0UE9TQjRkS2xNRFQrMGhzL3NuaGdWK2tKZWs4VXhFVXMyU0xYMW9RaGMwYXNQ
          dmtYU1l4VXoKNTFDTlF0aC94L3lEMHNYZmhibEJOd2lwQy9RV2V6S01HQjFNOHMxUU5DQWVo
          bnFOSExOcm1RTUxGNHl0YTgxQgpLOVBBaEhUSXFycXhtVW1ienN5TWNweTkzTEpyNVdXQldy
          UXpNZ3hnZDkrdS9FMGdqSUdWNHQrSjUwTFdDdXYKQXJuYkxzOFRHQ21RaHVpcHdRMXNLTGp2
          b2phVVJ0YmVRbnRVTHN3Y0dTdGxoaFJCUXBwdC9XOURGRnE2MjRkWApJdTRFRWRpaTdPL0Nn
          Y0dZYzJIRXFCeGRWcWx6QWdNQkFBR2pRakJBTUE0R0ExVWREd0VCL3dRRUF3SUJCakFQCkJn
          TlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJSNXRGbm1lN2JsNUFGemdBaUl5QnBZ
          OXVtYmJqQU4KQmdrcWhraUc5dzBCQVFzRkFBT0NBZ0VBVklSU3RObzNtQklxRXdzOHhXRHVt
          dVU5TTRENmlLdUVTcHFhK3h0YQpBYUdtUzJEcDF3TnE3bERuQ2Q1OHJKRHRKS0F1bDh4SkhX
          Y3RIVDFnTnBBM0xGanBRYWpQNVFHNldqRGdIY3RSCnJWMVBtYUxweUpMblo4aFkzc0tqR0t1
          TkZndnNlVU5VaFI0UEhZNkpna0VwZ1A5dlBiOFFkdmRLUHJFd2ppSXkKR2x3eEgrSVhJTXF0
          YjlaOUo1MTF3TjBNTkY5SFFCK0hsdkVLRWdvbVV4RXNLa0NXWHFkcmFRRFBOK0NTbVFTZAph
          SGRBK09MMzlxMXYwbUgyMzdWTW5aNHhHRUVoR09acm9xL1VialR4NVJZZGdpcE9lSmdRQk5u
          YzNSSlpHVFcKdHc0YnhzaGdzRjRMeEVGR3NvQTQ0eHc0cWFvcW5BVDZMNE5Nc1drcTRKRXds
          ZmZINklxMXRhNmUyb2Rsbit4dwpvSEdJb0JWL2Z1bnRKMElVQStVRGNnN3dSMUlGcnBtVXlM
          anRZblRVWlFGU0lndFpjUzk1eGdtSEZ5dER6RndQCmRzTmx2RWVNRFJCMXpuME9LUllQK1N6
          enpwZU1BWXBVN2xZS3hqNEFYL0VGeHFJbWZRUXBLaVRLOW5lQ0lXNVcKcDdibFRTcGtub2tX
          bVVUZDlsREpiY2J0NjdHK2RPV1V2QkkyZGtvc1RTWDR4MWZMRGZNTDRDYlpGeWRaUU5rQgpP
          NHE0ZHhtUWlNTHBvQTdPMWduem1GdmpCOWVlc3RHUTR0VXVsVFp2eGNESkIwK3pKRHllWWVP
          ZVBiRk5xRjMzCmxXazhYWVhyRWgzQmhCRWtMbmtNMHNSMUZYd3psb3lQc2JsSHpuN2dOakRx
          TitJSHBNNXBtN1JPcU0wcUVqSTQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      auth:
        token:
          bearerToken:
            name: tailscale-api-token
            namespace: external-secrets
            key: token
---
# ClusterSecretStore for Robbinsdale cluster
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: kubernetes-robbinsdale
spec:
  provider:
    kubernetes:
      remoteNamespace: external-secrets
      server:
        url: https://robbinsdale-k8s-operator.tailscale.svc.cluster.local
        caBundle: |
          LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZhekNDQTFPZ0F3SUJBZ0lSQUlJUXo3
          RFNRT05aUkdQZ3UyT0NpMkF3RFFZSktvWklodmNOQVFFTEJRQXcKVHpFTE1Ba0dBMVVFQmhN
          Q1ZWTXhLVEFuQmdOVkJBb1RJRWx1ZEdWeWJtVjBJRk5sWTNWeWFYUjVJRkpsYzJWaApjbU5v
          SUVkeWIzVndNUlV3RXdZRFZRUURFd3hKVTFKSElGSnZiM1FnV0RFd0hoY05NVFV3TmpBME1U
          RXdOREE0CldoY05NelV3TmpBME1URXdOREE0V2pCUE1Rc3dDUVlEVlFRR0V3SlZVekVwTUNj
          R0ExVUVDaE1nU1c1MFpYSnUKWlhRZ1UyVmpkWEpwZEhrZ1VtVnpaV0Z5WTJnZ1IzSnZkWEF4
          RlRBVEJnTlZCQU1UREVsVFVrY2dVbTl2ZENCWQpNVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJC
          UUFEZ2dJUEFEQ0NBZ29DZ2dJQkFLM29KSFAwRkRmem01NHJWeWdjCmg3N2N0OTg0a0l4dVBP
          WlhvSGozZGNLaS92VnFidllBVHlqYjNtaUdiRVNUdHJGai9SUVNhNzgvb3drYXNaQ3UKUUZu
          Qm5rb1BTUktJaTVLV1ZXblRzTnVqR1ZPUHFYMmlYeFYreEU2cFEremlPQkJXS29Fa29CZzF3
          YTJLZnJlUgpKUS85Q2dINFVIM0dSQklVaWcrcW4wZVNQUUFwMjByMzhRMk5aK3dRRVdFQWdB
          Y25rSXVrWGJoaHVqQVpEWkhlCkU2Q2tBeHNFYjRMUFFWSHRWT05OMXhIL0d0N3pzNTZsbHdS
          Q0RESWpUTklYSCtmcFdPYllPb1lWS1F1SWQyZUkKaGxoNGdkbktZMm1zM25XYk1MRGFKRjRE
          a3A2TkROMzRUYWdER21oVW01U3VMWTBOZXZ4R0JaNUtNbkhtakUwMgppZ0c0cGdxbU1RQkpC
          Mkdja0oxYWQwd1VrS1dTMmcxMHBubE1pSjB6RUdNdjVXU0FKMUQ3SDcxTjdncmdJM1l3ClIy
          K0xJSTUrVnc0UE9TQjRkS2xNRFQrMGhzL3NuaGdWK2tKZWs4VXhFVXMyU0xYMW9RaGMwYXNQ
          dmtYU1l4VXoKNTFDTlF0aC94L3lEMHNYZmhibEJOd2lwQy9RV2V6S01HQjFNOHMxUU5DQWVo
          bnFOSExOcm1RTUxGNHl0YTgxQgpLOVBBaEhUSXFycXhtVW1ienN5TWNweTkzTEpyNVdXQldy
          UXpNZ3hnZDkrdS9FMGdqSUdWNHQrSjUwTFdDdXYKQXJuYkxzOFRHQ21RaHVpcHdRMXNLTGp2
          b2phVVJ0YmVRbnRVTHN3Y0dTdGxoaFJCUXBwdC9XOURGRnE2MjRkWApJdTRFRWRpaTdPL0Nn
          Y0dZYzJIRXFCeGRWcWx6QWdNQkFBR2pRakJBTUE0R0ExVWREd0VCL3dRRUF3SUJCakFQCkJn
          TlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJSNXRGbm1lN2JsNUFGemdBaUl5QnBZ
          OXVtYmJqQU4KQmdrcWhraUc5dzBCQVFzRkFBT0NBZ0VBVklSU3RObzNtQklxRXdzOHhXRHVt
          dVU5TTRENmlLdUVTcHFhK3h0YQpBYUdtUzJEcDF3TnE3bERuQ2Q1OHJKRHRKS0F1bDh4SkhX
          Y3RIVDFnTnBBM0xGanBRYWpQNVFHNldqRGdIY3RSCnJWMVBtYUxweUpMblo4aFkzc0tqR0t1
          TkZndnNlVU5VaFI0UEhZNkpna0VwZ1A5dlBiOFFkdmRLUHJFd2ppSXkKR2x3eEgrSVhJTXF0
          YjlaOUo1MTF3TjBNTkY5SFFCK0hsdkVLRWdvbVV4RXNLa0NXWHFkcmFRRFBOK0NTbVFTZAph
          SGRBK09MMzlxMXYwbUgyMzdWTW5aNHhHRUVoR09acm9xL1VialR4NVJZZGdpcE9lSmdRQk5u
          YzNSSlpHVFcKdHc0YnhzaGdzRjRMeEVGR3NvQTQ0eHc0cWFvcW5BVDZMNE5Nc1drcTRKRXds
          ZmZINklxMXRhNmUyb2Rsbit4dwpvSEdJb0JWL2Z1bnRKMElVQStVRGNnN3dSMUlGcnBtVXlM
          anRZblRVWlFGU0lndFpjUzk1eGdtSEZ5dER6RndQCmRzTmx2RWVNRFJCMXpuME9LUllQK1N6
          enpwZU1BWXBVN2xZS3hqNEFYL0VGeHFJbWZRUXBLaVRLOW5lQ0lXNVcKcDdibFRTcGtub2tX
          bVVUZDlsREpiY2J0NjdHK2RPV1V2QkkyZGtvc1RTWTR4MWZMRGZNTDRDYlpGeWRaUU5rQgpP
          NHE0ZHhtUWlNTHBvQTdPMWduem1GdmpCOWVlc3RHUTR0VXVsVFp2eGNESkIwK3pKRHllWWVP
          ZVBiRk5xRjMzCmxXazhYWVhyRWgzQmhCRWtMbmtNMHNSMUZYd3psb3lQc2JsSHpuN2dOakRx
          TitJSHBNNXBtN1JPcU0wcUVqSTQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      auth:
        token:
          bearerToken:
            name: tailscale-api-token
            namespace: external-secrets
            key: token
---
# ClusterSecretStore for St. Petersburg cluster
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: kubernetes-stpetersburg
spec:
  provider:
    kubernetes:
      remoteNamespace: external-secrets
      server:
        url: https://stpetersburg-k8s-operator.tailscale.svc.cluster.local
        caBundle: |
          LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZhekNDQTFPZ0F3SUJBZ0lSQUlJUXo3
          RFNRT05aUkdQZ3UyT0NpMkF3RFFZSktvWklodmNOQVFFTEJRQXcKVHpFTE1Ba0dBMVVFQmhN
          Q1ZWTXhLVEFuQmdOVkJBb1RJRWx1ZEdWeWJtVjBJRk5sWTNWeWFYUjVJRkpsYzJWaApjbU5v
          SUVkeWIzVndNUlV3RXdZRFZRUURFd3hKVTFKSElGSnZiM1FnV0RFd0hoY05NVFV3TmpBME1U
          RXdOREE0CldoY05NelV3TmpBME1URXdOREE0V2pCUE1Rc3dDUVlEVlFRR0V3SlZVekVwTUNj
          R0ExVUVDaE1nU1c1MFpYSnUKWlhRZ1UyVmpkWEpwZEhrZ1VtVnpaV0Z5WTJnZ1IzSnZkWEF4
          RlRBVEJnTlZCQU1UREVsVFVrY2dVbTl2ZENCWQpNVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJC
          UUFEZ2dJUEFEQ0NBZ29DZ2dJQkFLM29KSFAwRkRmem01NHJWeWdjCmg3N2N0OTg0a0l4dVBP
          WlhvSGozZGNLaS92VnFidllBVHlqYjNtaUdiRVNUdHJGai9SUVNhNzgvb3drYXNaQ3UKUUZu
          Qm5rb1BTUktJaTVLV1ZXblRzTnVqR1ZPUHFYMmlYeFYreEU2cFEremlPQkJXS29Fa29CZzF3
          YTJLZnJlUgpKUS85Q2dINFVIM0dSQklVaWcrcW4wZVNQUUFwMjByMzhRMk5aK3dRRVdFQWdB
          Y25rSXVrWGJoaHVqQVpEWkhlCkU2Q2tBeHNFYjRMUFFWSHRWT05OMXhIL0d0N3pzNTZsbHdS
          Q0RESWpUTklYSCtmcFdPYllPb1lWS1F1SWQyZUkKaGxoNGdkbktZMm1zM25XYk1MRGFKRjRE
          a3A2TkROMzRUYWdER21oVW01U3VMWTBOZXZ4R0JaNUtNbkhtakUwMgppZ0c0cGdxbU1RQkpC
          Mkdja0oxYWQwd1VrS1dTMmcxMHBubE1pSjB6RUdNdjVXU0FKMUQ3SDcxTjdncmdJM1l3ClIy
          K0xJSTUrVnc0UE9TQjRkS2xNRFQrMGhzL3NuaGdWK2tKZWs4VXhFVXMyU0xYMW9RaGMwYXNQ
          dmtYU1l4VXoKNTFDTlF0aC94L3lEMHNYZmhibEJOd2lwQy9RV2V6S01HQjFNOHMxUU5DQWVo
          bnFOSExOcm1RTUxGNHl0YTgxQgpLOVBBaEhUSXFycXhtVW1ienN5TWNweTkzTEpyNVdXQldy
          UXpNZ3hnZDkrdS9FMGdqSUdWNHQrSjUwTFdDdXYKQXJuYkxzOFRHQ21RaHVpcHdRMXNLTGp2
          b2phVVJ0YmVRbnRVTHN3Y0dTdGxoaFJCUXBwdC9XOURGRnE2MjRkWApJdTRFRWRpaTdPL0Nn
          Y0dZYzJIRXFCeGRWcWx6QWdNQkFBR2pRakJBTUE0R0ExVWREd0VCL3dRRUF3SUJCakFQCkJn
          TlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJSNXRGbm1lN2JsNUFGemdBaUl5QnBZ
          OXVtYmJqQU4KQmdrcWhraUc5dzBCQVFzRkFBT0NBZ0VBVklSU3RObzNtQklxRXdzOHhXRHVt
          dVU5TTRENmlLdUVTcHFhK3h0YQpBYUdtUzJEcDF3TnE3bERuQ2Q1OHJKRHRKS0F1bDh4SkhX
          Y3RIVDFnTnBBM0xGanBRYWpQNVFHNldqRGdIY3RSCnJWMVBtYUxweUpMblo4aFkzc0tqR0t1
          TkZndnNlVU5VaFI0UEhZNkpna0VwZ1A5dlBiOFFkdmRLUHJFd2ppSXkKR2x3eEgrSVhJTXF0
          YjlaOUo1MTF3TjBNTkY5SFFCK0hsdkVLRWdvbVV4RXNLa0NXWHFkcmFRRFBOK0NTbVFTZAph
          SGRBK09MMzlxMXYwbUgyMzdWTW5aNHhHRUVoR09acm9xL1VialR4NVJZZGdpcE9lSmdRQk5u
          YzNSSlpHVFcKdHc0YnhzaGdzRjRMeEVGR3NvQTQ0eHc0cWFvcW5BVDZMNE5Nc1drcTRKRXds
          ZmZINklxMXRhNmUyb2Rsbit4dwpvSEdJb0JWL2Z1bnRKMElVQStVRGNnN3dSMUlGcnBtVXlM
          anRZblRVWlFGU0lndFpjUzk1eGdtSEZ5dER6RndQCmRzTmx2RWVNRFJCMXpuME9LUllQK1N6
          enpwZU1BWXBVN2xZS3hqNEFYL0VGeHFJbWZRUXBLaVRLOW5lQ0lXNVcKcDdibFRTcGtub2tX
          bVVUZDlsREpiY2J0NjdHK2RPV1V2QkkyZGtvc1RTWTR4MWZMRGZNTDRDYlpGeWRaUU5rQgpP
          NHE0ZHhtUWlNTHBvQTdPMWduem1GdmpCOWVlc3RHUTR0VXVsVFp2eGNESkIwK3pKRHllWWVP
          ZVBiRk5xRjMzCmxXazhYWVhyRWgzQmhCRWtMbmtNMHNSMUZYd3psb3lQc2JsSHpuN2dOakRx
          TitJSHBNNXBtN1JPcU0wcUVqSTQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      auth:
        token:
          bearerToken:
            name: tailscale-api-token
            namespace: external-secrets
            key: token
---
# ClusterSecretStore for local cluster secrets
# Uses in-cluster auth via ServiceAccount
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: kubernetes-local
spec:
  provider:
    kubernetes:
      remoteNamespace: external-secrets
      server:
        url: https://kubernetes.default.svc
        caProvider:
          type: ConfigMap
          name: kube-root-ca.crt
          namespace: external-secrets
          key: ca.crt
      auth:
        serviceAccount:
          name: external-secrets-store
          namespace: external-secrets
