apiVersion: tailscale.com/v1alpha1
kind: Recorder
metadata:
  name: ${LOCATION}-recorder
spec:
  replicas: 1
  statefulSet:
    pod:
      container:
        image: docker.io/tailscale/tsrecorder:v1.92.5
        env:
          - name: TSRECORDER_SECURE
            value: "false"
  enableUI: true
  tags:
    - "tag:k8s"
    - "tag:k8s-recorder"
    - "tag:${LOCATION}"
  storage:
    s3:
      endpoint: garage.garage.svc.cluster.local:3900
      bucket: tailscale-recorder
      credentials:
        secret:
          name: s3-auth

